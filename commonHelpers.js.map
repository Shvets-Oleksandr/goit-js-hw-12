{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict'\n\nexport const createGalleryCardTemplate = (cardInfo) => {\n    return `\n    <li class=\"gallery-item\">\n        <a href=\"${cardInfo.largeImageURL}\">\n            <img src=\"${cardInfo.webformatURL}\"\n                alt=\"${cardInfo.tags}\"\n                width=\"360\"\n                height=\"152\"\n            />\n        </a>\n\n        <ul class=\"img-statistics\">\n            <li class=\"img-statistics-item\">\n                <h3 class=\"img-statistics-item-title\">Likes</h3>\n                <p class=\"img-statistics-item-value\">${cardInfo.likes}</p>\n            </li>\n            <li class=\"img-statistics-item\">\n                <h3 class=\"img-statistics-item-title\">Views</h3>\n                <p class=\"img-statistics-item-value\">${cardInfo.views}</p>\n            </li>\n            <li class=\"img-statistics-item\">\n                <h3 class=\"img-statistics-item-title\">Comments</h3>\n                <p class=\"img-statistics-item-value\">${cardInfo.comments}</p>\n            </li>\n            <li class=\"img-statistics-item\">\n                <h3 class=\"img-statistics-item-title\">Downloads</h3>\n                <p class=\"img-statistics-item-value\">${cardInfo.downloads}</p>\n            </li>\n        </ul>\n    </li>\n    `;\n}","'use strict'\n\nimport axios from 'axios';\n\naxios.defaults.baseURL ='https://pixabay.com/api/';\n\nexport const axiosImg = (searchQuery, page) => {\n\n    const axiosParams = {\n        params: {\n            q: searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n            key: '45444033-7a199cc8ba7e30bdfbfaa3141',\n        },\n    }\n\n    return axios.get('', axiosParams);\n};\n\n","'use strict'\n\nimport { createGalleryCardTemplate } from \"./js/render-functions.js\";\nimport { axiosImg } from \"./js/pixabay-api.js\";\n\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\n\nconst searchForm = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-button');\n\n\nlet curentPage = 33;\nlet searchValue = '';\nlet lightbox;\nlet cardHeight = 0;\nlet totalPages = 1;\nlet quantityCardBySubmmit = 15;\n\nconst onSearchFormSubmit = async (event) => {\n\n    try {\n        event.preventDefault();\n\n        galleryEl.innerHTML = '';\n\n        loaderEl.classList.remove('is-hidden');\n\n        searchValue = searchForm.elements.search.value;\n\n        curentPage = 1;\n        \n        if (!searchValue) {\n            \n            iziToast.error({\n                title: 'Error',\n                message: 'Please enter a search query.',\n                position: 'topRight',\n            });\n\n            loaderEl.classList.add('is-hidden');\n            return;\n        }\n\n        const response = await axiosImg(searchValue, curentPage);\n        \n        if (response.data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            loaderEl.classList.add('is-hidden');\n            searchForm.reset();\n            return;\n        }\n\n        quantityCardBySubmmit = response.data.hits.length;\n\n        totalPages = Math.ceil(response.data.totalHits / quantityCardBySubmmit);\n\n        const galleryImgTemplate = response.data.hits.map(cardDetais => createGalleryCardTemplate(cardDetais)).join('');\n\n        loaderEl.classList.add('is-hidden');\n\n        galleryEl.innerHTML = galleryImgTemplate;\n\n        const galleryCardEl = galleryEl.querySelector('li');\n\n        cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n\n        if (curentPage === totalPages) {\n            loadMoreBtnEl.classList.add('is-hidden');\n            iziToast.info({\n                message: \"This is the maximum search result for your query.\",\n                position: 'bottomCenter',\n            });\n        } else {\n            loadMoreBtnEl.classList.remove('is-hidden');\n        }\n\n           \n\n        if (!lightbox) {\n            lightbox = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 150,\n            });\n\n        } else {\n            lightbox.refresh();\n        }\n        \n\n    } catch (error) {\n\n        const statusCode = error.response ? error.response.status : 'No response from server';\n\n        iziToast.error({\n            title: 'Error',\n            message: `Status Code: ${statusCode} - ${error.message}`,\n            position: 'topRight',\n        });\n\n        loaderEl.classList.add('is-hidden');\n    };\n    \n}\n\n\nconst onLoadMoreBtnClick = async (event) => {\n\n    try {\n\n        curentPage++;\n\n        loaderEl.classList.remove('is-hidden');\n\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        const response = await axiosImg(searchValue, curentPage);\n\n        const galleryImgTemplate = response.data.hits.map(cardDetais => createGalleryCardTemplate(cardDetais)).join('');\n\n        loaderEl.classList.add('is-hidden');\n\n        galleryEl.insertAdjacentHTML('beforeend', galleryImgTemplate);\n\n        lightbox.refresh();\n\n        scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n\n        loadMoreBtnEl.classList.remove('is-hidden');\n\n\n        if (curentPage >= totalPages) {\n            loadMoreBtnEl.classList.add('is-hidden');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n\n    } catch (error) {\n        const statusCode = error.response ? error.response.status : 'No response from server';\n\n        iziToast.error({\n            title: 'Error',\n            message: `Status Code: ${statusCode} - ${error.message}`,\n            position: 'topRight',\n        });\n\n        loaderEl.classList.add('is-hidden');\n        \n    }\n    \n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["createGalleryCardTemplate","cardInfo","axios","axiosImg","searchQuery","page","axiosParams","searchForm","galleryEl","loaderEl","loadMoreBtnEl","curentPage","searchValue","lightbox","cardHeight","totalPages","quantityCardBySubmmit","onSearchFormSubmit","event","iziToast","response","galleryImgTemplate","cardDetais","SimpleLightbox","error","statusCode","onLoadMoreBtnClick"],"mappings":"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"}